import{c$ as Me,dJ as pe,dE as De,dK as Qe,dG as xe,dL as We,i as Pe,dk as X,dl as Ae,r as B,c as r,dM as Ie,dN as Ve,w as s,cR as re,o as ze,dm as Fe,dO as ce,h as I,dP as ie,dj as He,g as Ne,dQ as Re,d2 as je,cJ as Ke,d3 as Ue,dR as Ee,cM as se,d9 as de,da as o,d as l,di as Je,db as _,dd as C,dS as S,dT as Ge}from"./index.d880ed97.js";import{Q as Xe,a as Ye,b as Ze,c as ea,d as aa}from"./QLayout.3ef70874.js";import{b as V,Q as q,a as L,c as v}from"./format.7f0b6061.js";import{T as Y,Q as ta}from"./TouchPan.3b569cbf.js";import"./QResizeObserver.b8f563d0.js";const fe=150;var la=Me({name:"QDrawer",inheritAttrs:!1,props:{...pe,...De,side:{type:String,default:"left",validator:a=>["left","right"].includes(a)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:a=>["default","desktop","mobile"].includes(a),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Qe,"onLayout","miniState"],setup(a,{slots:m,emit:y,attrs:z}){const b=Ne(),{proxy:{$q:h}}=b,F=xe(a,h),{preventBodyScroll:M}=Re(),{registerTimeout:Z,removeTimeout:ve}=We(),t=Pe(Ae,X);if(t===X)return console.error("QDrawer needs to be child of QLayout"),X;let H,$=null,p;const i=B(a.behavior==="mobile"||a.behavior!=="desktop"&&t.totalWidth.value<=a.breakpoint),D=r(()=>a.mini===!0&&i.value!==!0),f=r(()=>D.value===!0?a.miniWidth:a.width),n=B(a.showIfAbove===!0&&i.value===!1?!0:a.modelValue===!0),ee=r(()=>a.persistent!==!0&&(i.value===!0||be.value===!0));function ae(e,u){if(me(),e!==!1&&t.animate(),c(0),i.value===!0){const d=t.instances[P.value];d!==void 0&&d.belowBreakpoint===!0&&d.hide(!1),g(1),t.isContainer.value!==!0&&M(!0)}else g(0),e!==!1&&E(!1);Z(()=>{e!==!1&&E(!0),u!==!0&&y("show",e)},fe)}function te(e,u){he(),e!==!1&&t.animate(),g(0),c(T.value*f.value),J(),u!==!0?Z(()=>{y("hide",e)},fe):ve()}const{show:N,hide:Q}=Ie({showing:n,hideOnRouteChange:ee,handleShow:ae,handleHide:te}),{addToHistory:me,removeFromHistory:he}=Ve(n,Q,ee),W={belowBreakpoint:i,hide:Q},w=r(()=>a.side==="right"),T=r(()=>(h.lang.rtl===!0?-1:1)*(w.value===!0?1:-1)),le=B(0),O=B(!1),R=B(!1),ue=B(f.value*T.value),P=r(()=>w.value===!0?"left":"right"),j=r(()=>n.value===!0&&i.value===!1&&a.overlay===!1?a.miniToOverlay===!0?a.miniWidth:f.value:0),K=r(()=>a.overlay===!0||a.miniToOverlay===!0||t.view.value.indexOf(w.value?"R":"L")!==-1||h.platform.is.ios===!0&&t.isContainer.value===!0),x=r(()=>a.overlay===!1&&n.value===!0&&i.value===!1),be=r(()=>a.overlay===!0&&n.value===!0&&i.value===!1),we=r(()=>"fullscreen q-drawer__backdrop"+(n.value===!1&&O.value===!1?" hidden":"")),ye=r(()=>({backgroundColor:`rgba(0,0,0,${le.value*.4})`})),oe=r(()=>w.value===!0?t.rows.value.top[2]==="r":t.rows.value.top[0]==="l"),ge=r(()=>w.value===!0?t.rows.value.bottom[2]==="r":t.rows.value.bottom[0]==="l"),ke=r(()=>{const e={};return t.header.space===!0&&oe.value===!1&&(K.value===!0?e.top=`${t.header.offset}px`:t.header.space===!0&&(e.top=`${t.header.size}px`)),t.footer.space===!0&&ge.value===!1&&(K.value===!0?e.bottom=`${t.footer.offset}px`:t.footer.space===!0&&(e.bottom=`${t.footer.size}px`)),e}),_e=r(()=>{const e={width:`${f.value}px`,transform:`translateX(${ue.value}px)`};return i.value===!0?e:Object.assign(e,ke.value)}),$e=r(()=>"q-drawer__content fit "+(t.isContainer.value!==!0?"scroll":"overflow-auto")),Ce=r(()=>`q-drawer q-drawer--${a.side}`+(R.value===!0?" q-drawer--mini-animate":"")+(a.bordered===!0?" q-drawer--bordered":"")+(F.value===!0?" q-drawer--dark q-dark":"")+(O.value===!0?" no-transition":n.value===!0?"":" q-layout--prevent-focus")+(i.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${D.value===!0?"mini":"standard"}`+(K.value===!0||x.value!==!0?" fixed":"")+(a.overlay===!0||a.miniToOverlay===!0?" q-drawer--on-top":"")+(oe.value===!0?" q-drawer--top-padding":""))),Be=r(()=>{const e=h.lang.rtl===!0?a.side:P.value;return[[Y,qe,void 0,{[e]:!0,mouse:!0}]]}),Te=r(()=>{const e=h.lang.rtl===!0?P.value:a.side;return[[Y,ne,void 0,{[e]:!0,mouse:!0}]]}),Oe=r(()=>{const e=h.lang.rtl===!0?P.value:a.side;return[[Y,ne,void 0,{[e]:!0,mouse:!0,mouseAllDir:!0}]]});function U(){Le(i,a.behavior==="mobile"||a.behavior!=="desktop"&&t.totalWidth.value<=a.breakpoint)}s(i,e=>{e===!0?(H=n.value,n.value===!0&&Q(!1)):a.overlay===!1&&a.behavior!=="mobile"&&H!==!1&&(n.value===!0?(c(0),g(0),J()):N(!1))}),s(()=>a.side,(e,u)=>{t.instances[u]===W&&(t.instances[u]=void 0,t[u].space=!1,t[u].offset=0),t.instances[e]=W,t[e].size=f.value,t[e].space=x.value,t[e].offset=j.value}),s(t.totalWidth,()=>{(t.isContainer.value===!0||document.qScrollPrevented!==!0)&&U()}),s(()=>a.behavior+a.breakpoint,U),s(t.isContainer,e=>{n.value===!0&&M(e!==!0),e===!0&&U()}),s(t.scrollbarWidth,()=>{c(n.value===!0?0:void 0)}),s(j,e=>{k("offset",e)}),s(x,e=>{y("onLayout",e),k("space",e)}),s(w,()=>{c()}),s(f,e=>{c(),G(a.miniToOverlay,e)}),s(()=>a.miniToOverlay,e=>{G(e,f.value)}),s(()=>h.lang.rtl,()=>{c()}),s(()=>a.mini,()=>{a.noMiniAnimation||a.modelValue===!0&&(Se(),t.animate())}),s(D,e=>{y("miniState",e)});function c(e){e===void 0?re(()=>{e=n.value===!0?0:f.value,c(T.value*e)}):(t.isContainer.value===!0&&w.value===!0&&(i.value===!0||Math.abs(e)===f.value)&&(e+=T.value*t.scrollbarWidth.value),ue.value=e)}function g(e){le.value=e}function E(e){const u=e===!0?"remove":t.isContainer.value!==!0?"add":"";u!==""&&document.body.classList[u]("q-body--drawer-toggle")}function Se(){$!==null&&clearTimeout($),b.proxy&&b.proxy.$el&&b.proxy.$el.classList.add("q-drawer--mini-animate"),R.value=!0,$=setTimeout(()=>{$=null,R.value=!1,b&&b.proxy&&b.proxy.$el&&b.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function qe(e){if(n.value!==!1)return;const u=f.value,d=V(e.distance.x,0,u);if(e.isFinal===!0){d>=Math.min(75,u)===!0?N():(t.animate(),g(0),c(T.value*u)),O.value=!1;return}c((h.lang.rtl===!0?w.value!==!0:w.value)?Math.max(u-d,0):Math.min(0,d-u)),g(V(d/u,0,1)),e.isFirst===!0&&(O.value=!0)}function ne(e){if(n.value!==!0)return;const u=f.value,d=e.direction===a.side,A=(h.lang.rtl===!0?d!==!0:d)?V(e.distance.x,0,u):0;if(e.isFinal===!0){Math.abs(A)<Math.min(75,u)===!0?(t.animate(),g(1),c(0)):Q(),O.value=!1;return}c(T.value*A),g(V(1-A/u,0,1)),e.isFirst===!0&&(O.value=!0)}function J(){M(!1),E(!0)}function k(e,u){t.update(a.side,e,u)}function Le(e,u){e.value!==u&&(e.value=u)}function G(e,u){k("size",e===!0?a.miniWidth:u)}return t.instances[a.side]=W,G(a.miniToOverlay,f.value),k("space",x.value),k("offset",j.value),a.showIfAbove===!0&&a.modelValue!==!0&&n.value===!0&&a["onUpdate:modelValue"]!==void 0&&y("update:modelValue",!0),ze(()=>{y("onLayout",x.value),y("miniState",D.value),H=a.showIfAbove===!0;const e=()=>{(n.value===!0?ae:te)(!1,!0)};if(t.totalWidth.value!==0){re(e);return}p=s(t.totalWidth,()=>{p(),p=void 0,n.value===!1&&a.showIfAbove===!0&&i.value===!1?N(!1):e()})}),Fe(()=>{p!==void 0&&p(),$!==null&&(clearTimeout($),$=null),n.value===!0&&J(),t.instances[a.side]===W&&(t.instances[a.side]=void 0,k("size",0),k("offset",0),k("space",!1))}),()=>{const e=[];i.value===!0&&(a.noSwipeOpen===!1&&e.push(ce(I("div",{key:"open",class:`q-drawer__opener fixed-${a.side}`,"aria-hidden":"true"}),Be.value)),e.push(ie("div",{ref:"backdrop",class:we.value,style:ye.value,"aria-hidden":"true",onClick:Q},void 0,"backdrop",a.noSwipeBackdrop!==!0&&n.value===!0,()=>Oe.value)));const u=D.value===!0&&m.mini!==void 0,d=[I("div",{...z,key:""+u,class:[$e.value,z.class]},u===!0?m.mini():He(m.default))];return a.elevated===!0&&n.value===!0&&d.push(I("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),e.push(ie("aside",{ref:"content",class:Ce.value,style:_e.value},d,"contentclose",a.noSwipeClose!==!0&&i.value===!0,()=>Te.value)),I("div",{class:"q-drawer-container"},e)}}});const ua=Ke({name:"MainLayout",components:{},setup(){const a=Ue(),m=B(!1);return{store:a,leftDrawerOpen:m,toggleLeftDrawer(){m.value=!m.value}}},methods:{async logOutButton(){try{await this.store.logOut()}finally{this.$router.replace("/login")}}}});function oa(a,m,y,z,b,h){const F=Ee("router-view");return se(),de(Xe,{view:"lHh Lpr lFf"},{default:o(()=>[l(ea,{elevated:""},{default:o(()=>[l(Ye,null,{default:o(()=>[l(Je,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:a.toggleLeftDrawer},null,8,["onClick"]),l(Ze,null,{default:o(()=>[_(" Kataster jam ")]),_:1})]),_:1})]),_:1}),l(la,{modelValue:a.leftDrawerOpen,"onUpdate:modelValue":m[0]||(m[0]=M=>a.leftDrawerOpen=M),"show-if-above":"",bordered:""},{default:o(()=>[l(ta,null,{default:o(()=>[l(q,{header:""},{default:o(()=>[_(C(a.$t("menu")),1)]),_:1}),l(L,{clickable:"",to:{name:"home"},exact:""},{default:o(()=>[l(v,{avatar:""},{default:o(()=>[l(S,{name:"home"})]),_:1}),l(v,null,{default:o(()=>[l(q,null,{default:o(()=>[_(C(a.$t("home")),1)]),_:1})]),_:1})]),_:1}),l(L,{clickable:"",to:{name:"caves"}},{default:o(()=>[l(v,{avatar:""},{default:o(()=>[l(S,{name:"egg_alt"})]),_:1}),l(v,null,{default:o(()=>[l(q,null,{default:o(()=>[_(C(a.$t("caves")),1)]),_:1})]),_:1})]),_:1}),l(L,{clickable:"",to:{name:"trips"}},{default:o(()=>[l(v,{avatar:""},{default:o(()=>[l(S,{name:"hiking"})]),_:1}),l(v,null,{default:o(()=>[l(q,null,{default:o(()=>[_(C(a.$t("trips")),1)]),_:1})]),_:1})]),_:1}),l(L,{clickable:"",to:{name:"custom-locations"}},{default:o(()=>[l(v,{avatar:""},{default:o(()=>[l(S,{name:"place"})]),_:1}),l(v,null,{default:o(()=>[l(q,null,{default:o(()=>[_(C(a.$t("customLocations")),1)]),_:1})]),_:1})]),_:1}),l(L,{clickable:"",to:{name:"offline-data-list"}},{default:o(()=>[l(v,{avatar:""},{default:o(()=>[l(S,{name:"wifi_off"})]),_:1}),l(v,null,{default:o(()=>[l(q,null,{default:o(()=>[_(C(a.$t("offlinedata")),1)]),_:1})]),_:1})]),_:1}),ce((se(),de(L,{clickable:"",onClickOnce:a.logOutButton},{default:o(()=>[l(v,{avatar:""},{default:o(()=>[l(S,{name:"logout"})]),_:1}),l(v,null,{default:o(()=>[_(C(a.$t("logOut")),1)]),_:1})]),_:1},8,["onClickOnce"])),[[Ge]])]),_:1})]),_:1},8,["modelValue"]),l(aa,null,{default:o(()=>[l(F)]),_:1})]),_:1})}var ca=je(ua,[["render",oa]]);export{ca as default};
